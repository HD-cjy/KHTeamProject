## ERD상 구조 
![[Pasted image 20250531154135.png|340]]
### 테이블명: MESSAGE

| 컬럼명      | Data Type          | Nullable | Key | Description |
| -------- | ------------------ | -------- | --- | ----------- |
| ROOMNO   | NUMBER(11,0)       | NO       | PK  | 채팅방번호       |
| NO       | NUMBER(11,0)       | NO       | PK  | 메시지번호       |
| MESSAGE  | CLOB               | NO       |     | 메시지내용       |
| IMAGEURL | VARCHAR2(255 BYTE) | NO       |     | 이미지URL      |
| USERID   | VARCHAR2(255 BYTE) | NO       | FK  | 보낸사람아이디     |
| SENDTIME | DATE               | NO       |     | 보낸 시간       |

### 테이블명:CHAT_ROOM

| 컬럼이름      | Data Type          | Nullable | Key    | Description                           |
| --------- | ------------------ | -------- | ------ | ------------------------------------- |
| ROOMNO    | NUMBER(11,0)       | NO       | PK, FK | 채팅방번호                                 |
| USERID    | VARCHAR2(255 BYTE) | NO       | PK, FK | 유저 ID (ABC123@TEST123)                |
| LASTVISIT | VARCHAR2(20 BYTE)  | NO       |        | 마지막 방문 EX) ABC123(날짜시간)@TEST123(날짜시간) |
| CHATTYPE  | VARCHAR2(20 BYTE)  | NO       |        | 채팅타입 (이미지 채팅인지 일반 채팅인지)               |


SQL문 추가 
```sql
CREATE SEQUENCE CHAT_MESSAGE_SEQ
    MINVALUE 0
    MAXVALUE 9999999999999999999999999999
    INCREMENT BY 1
    START WITH 1
    NOCYCLE
    NOORDER
    NOCACHE;

```


테이블 재정리 
```sql
-- 모든 테이블의 의존성 역순으로 DROP (안전한 재구성을 위함)
-- 요청에 따라 CHAT_ROOM과 MESSAGE 먼저 DROP
DROP TABLE MESSAGE CASCADE CONSTRAINTS;
DROP TABLE CHAT_ROOM CASCADE CONSTRAINTS;

-- 나머지 테이블들 DROP
DROP TABLE SUBSCRIPTION CASCADE CONSTRAINTS;
DROP TABLE FAVORITE CASCADE CONSTRAINTS;
DROP TABLE USERQNA_INFO CASCADE CONSTRAINTS;
DROP TABLE ANSWER_INFO CASCADE CONSTRAINTS;
DROP TABLE SALL_REVIEW CASCADE CONSTRAINTS;
DROP TABLE PRODUCT CASCADE CONSTRAINTS;
DROP TABLE USER_INFO CASCADE CONSTRAINTS;

```
### USER 더미데이터 
```sql
-- 1. USER_INFO 더미 데이터 삽입
-- USERNO는 시퀀스 목록에 USER_INFO에 대한 직접적인 시퀀스가 없으므로 일단 직접 할당합니다.
-- 실제 애플리케이션에서는 USERNO를 위한 시퀀스를 별도로 생성하거나,
-- DDL에서 IDENTITY 속성을 사용하여 자동 생성되도록 설정하는 것이 일반적입니다.
INSERT INTO DAMGEUN.USER_INFO (USERNO, USERID, PASSWORD, USERNAME, EMAIL, STATUS, USERRANK)
VALUES (1, 'user1', 'password1', '홍길동', 'user1@example.com', 'Y', 100);

INSERT INTO DAMGEUN.USER_INFO (USERNO, USERID, PASSWORD, USERNAME, EMAIL, STATUS, USERRANK)
VALUES (2, 'user2', 'password2', '김철수', 'user2@example.com', 'Y', 95);

INSERT INTO DAMGEUN.USER_INFO (USERNO, USERID, PASSWORD, USERNAME, EMAIL, STATUS, USERRANK)
VALUES (3, 'user3', 'password3', '이영희', 'user3@example.com', 'Y', 90);

INSERT INTO DAMGEUN.USER_INFO (USERNO, USERID, PASSWORD, USERNAME, EMAIL, STATUS, USERRANK)
VALUES (4, 'user4', 'password4', '박민수', 'user4@example.com', 'Y', 92);

INSERT INTO DAMGEUN.USER_INFO (USERNO, USERID, PASSWORD, USERNAME, EMAIL, STATUS, USERRANK)
VALUES (5, 'admin', 'admin123', '관리자', 'admin@example.com', 'Y', 0);

COMMIT;
```



## 5. Key Features Implementation Plan>)