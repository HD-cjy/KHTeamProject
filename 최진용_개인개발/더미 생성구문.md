### 사용자 더미 생성 



### 채팅 더미생성

```sql 
-- --- 종합적인 문제 해결을 위한 전체 스크립트 ---

-- 단계 1: 기존 테이블 및 시퀀스 정리 (가장 확실한 방법)
-- 메시지 테이블 먼저 드롭 (CHAT_ROOM에 종속되므로)
DROP TABLE "DAMGEUN"."MESSAGE" CASCADE CONSTRAINTS;
-- 채팅방 테이블 드롭
DROP TABLE "DAMGEUN"."CHAT_ROOM" CASCADE CONSTRAINTS;

-- 시퀀스도 드롭하여 초기 상태로 만듭니다.
DROP SEQUENCE "DAMGEUN"."CHAT_ROOM_SEQ";
DROP SEQUENCE "DAMGEUN"."MESSAGE_SEQ";

-- 단계 2: 시퀀스 재생성 (0부터 시작하도록)
CREATE SEQUENCE "DAMGEUN"."CHAT_ROOM_SEQ"
  INCREMENT BY 1
  START WITH 0
  MINVALUE 0
  MAXVALUE 9999999999999999999999999999
  NOCACHE
  NOORDER
  NOCYCLE;

CREATE SEQUENCE "DAMGEUN"."MESSAGE_SEQ"
  INCREMENT BY 1
  START WITH 0
  MINVALUE 0
  MAXVALUE 9999999999999999999999999999
  NOCACHE
  NOORDER
  NOCYCLE;

-- 단계 3: CHAT_ROOM (채팅방) 테이블 재생성
-- LASTVISIT 컬럼의 길이를 255 BYTE로 설정합니다. (충분한 길이 확보)
CREATE TABLE "DAMGEUN"."CHAT_ROOM"
(
    "ROOM_NO"   NUMBER(11,0)        NOT NULL ENABLE,
    "USER_ID"   VARCHAR2(255 BYTE)  NOT NULL ENABLE,
    "LASTVISIT" VARCHAR2(255 BYTE)  NOT NULL ENABLE, -- 255 BYTE로 충분히 확장
    "CHAT_TYPE" VARCHAR2(20 BYTE)   NOT NULL ENABLE,
    CONSTRAINT "CHAT_ROOM_PK" PRIMARY KEY ("ROOM_NO")
) SEGMENT CREATION IMMEDIATE
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE "SYSTEM";

COMMENT ON COLUMN "DAMGEUN"."CHAT_ROOM"."ROOM_NO" IS '채팅방번호';
COMMENT ON COLUMN "DAMGEUN"."CHAT_ROOM"."USER_ID" IS '유저 ID(ABC123@TEST123)';
COMMENT ON COLUMN "DAMGEUN"."CHAT_ROOM"."LASTVISIT" IS '마지막방문 EX)ABC123(날짜시간)@TEST123(날짜시간)';
COMMENT ON COLUMN "DAMGEUN"."CHAT_ROOM"."CHAT_TYPE" IS '채팅타입(이미지 채팅인지 일반 채팅인지)';

-- 단계 4: MESSAGE (메시지) 테이블 재생성
CREATE TABLE "DAMGEUN"."MESSAGE"
(
    "ROOM_NO"   NUMBER(11,0)        NOT NULL ENABLE,
    "NO"        NUMBER(11,0)        NOT NULL ENABLE,
    "MESSAGE"   CLOB                NOT NULL ENABLE,
    "IMAGEURL"  VARCHAR2(255 BYTE)  NOT NULL ENABLE,
    "USER_ID"   VARCHAR2(255 BYTE)  NOT NULL ENABLE,
    "SENDTIME"  DATE                NOT NULL ENABLE,
    CONSTRAINT "MESSAGE_PK" PRIMARY KEY ("NO", "ROOM_NO"), -- 복합 기본 키
    CONSTRAINT "ROOM_NO_FK" FOREIGN KEY ("ROOM_NO")
      REFERENCES "DAMGEUN"."CHAT_ROOM" ("ROOM_NO") ENABLE
) SEGMENT CREATION IMMEDIATE
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE "SYSTEM"
LOB ("MESSAGE") STORE AS BASICFILE (
  TABLESPACE "SYSTEM" ENABLE STORAGE IN ROW CHUNK 8192 RETENTION
  NOCACHE LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
);

COMMENT ON COLUMN "DAMGEUN"."MESSAGE"."ROOM_NO" IS '채팅방번호';
COMMENT ON COLUMN "DAMGEUN"."MESSAGE"."NO" IS '메시지번호';
COMMENT ON COLUMN "DAMGEUN"."MESSAGE"."MESSAGE" IS '메시지내용';
COMMENT ON COLUMN "DAMGEUN"."MESSAGE"."IMAGEURL" IS '이미지URL';
COMMENT ON COLUMN "DAMGEUN"."MESSAGE"."USER_ID" IS '보낸사람아이디';
COMMENT ON COLUMN "DAMGEUN"."MESSAGE"."SENDTIME" IS '보낸 시간';

-- 단계 5: 더미 데이터 삽입 (이제 모든 것이 초기화되었으므로 순서대로 작동)

-- CHAT_ROOM (채팅방) 더미 데이터
INSERT INTO "DAMGEUN"."CHAT_ROOM" ("ROOM_NO", "USER_ID", "LASTVISIT", "CHAT_TYPE")
VALUES (
    "DAMGEUN"."CHAT_ROOM_SEQ".NEXTVAL,
    'user_A',
    'EX1(' || TO_CHAR(SYSDATE, 'YYYYMMDDHH24MISS') || ')@EX2(' || TO_CHAR(SYSDATE + (1/24/60)*5, 'YYYYMMDDHH24MISS') || ')',
    '일반채팅'
);

INSERT INTO "DAMGEUN"."CHAT_ROOM" ("ROOM_NO", "USER_ID", "LASTVISIT", "CHAT_TYPE")
VALUES (
    "DAMGEUN"."CHAT_ROOM_SEQ".NEXTVAL,
    'user_B',
    'IMGF(' || TO_CHAR(SYSDATE + (1/24/60)*10, 'YYYYMMDDHH24MISS') || ')@IMGL(' || TO_CHAR(SYSDATE + (1/24/60)*15, 'YYYYMMDDHH24MISS') || ')',
    '이미지채팅'
);

INSERT INTO "DAMGEUN"."CHAT_ROOM" ("ROOM_NO", "USER_ID", "LASTVISIT", "CHAT_TYPE")
VALUES (
    "DAMGEUN"."CHAT_ROOM_SEQ".NEXTVAL,
    'user_C',
    'VIS1(' || TO_CHAR(SYSDATE + (1/24/60)*20, 'YYYYMMDDHH24MISS') || ')@VIS2(' || TO_CHAR(SYSDATE + (1/24/60)*25, 'YYYYMMDDHH24MISS') || ')',
    '일반채팅'
);

COMMIT; -- CHAT_ROOM 데이터 커밋 (매우 중요!)

-- MESSAGE (메시지) 더미 데이터
INSERT INTO "DAMGEUN"."MESSAGE" ("NO", "ROOM_NO", "MESSAGE", "IMAGEURL", "USER_ID", "SENDTIME")
VALUES (
    "DAMGEUN"."MESSAGE_SEQ".NEXTVAL,
    0, -- CHAT_ROOM_SEQ가 0부터 시작했으므로 첫 ROOM_NO는 0
    '안녕하세요! 첫 더미 메시지입니다.',
    'N/A',
    'user_A',
    SYSDATE - (1/24/60)*3
);

INSERT INTO "DAMGEUN"."MESSAGE" ("NO", "ROOM_NO", "MESSAGE", "IMAGEURL", "USER_ID", "SENDTIME")
VALUES (
    "DAMGEUN"."MESSAGE_SEQ".NEXTVAL,
    0,
    '반갑습니다. 잘 동작하길 바랍니다.',
    'N/A',
    'guest_user',
    SYSDATE - (1/24/60)*2
);

INSERT INTO "DAMGEUN"."MESSAGE" ("NO", "ROOM_NO", "MESSAGE", "IMAGEURL", "USER_ID", "SENDTIME")
VALUES (
    "DAMGEUN"."MESSAGE_SEQ".NEXTVAL,
    1, -- CHAT_ROOM_SEQ가 0부터 시작했으므로 두 번째 ROOM_NO는 1
    '이것은 이미지 채팅방 메시지입니다.',
    'http://image.example.com/test_img1.jpg',
    'user_B',
    SYSDATE - (1/24/60)*1
);

INSERT INTO "DAMGEUN"."MESSAGE" ("NO", "ROOM_NO", "MESSAGE", "IMAGEURL", "USER_ID", "SENDTIME")
VALUES (
    "DAMGEUN"."MESSAGE_SEQ".NEXTVAL,
    1,
    '테스트 이미지를 확인해주세요.',
    'http://image.example.com/test_img2.png',
    'user_pic',
    SYSDATE
);

INSERT INTO "DAMGEUN"."MESSAGE" ("NO", "ROOM_NO", "MESSAGE", "IMAGEURL", "USER_ID", "SENDTIME")
VALUES (
    "DAMGEUN"."MESSAGE_SEQ".NEXTVAL,
    2, -- CHAT_ROOM_SEQ가 0부터 시작했으므로 세 번째 ROOM_NO는 2
    '긴급 공지사항입니다. 확인 바랍니다.',
    'N/A',
    'admin_user',
    SYSDATE + (1/24/60)*1
);

COMMIT; -- 최종 변경사항 저장
```


